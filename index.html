<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Yu-Gi-Oh! LP Counter</title>
<style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: radial-gradient(ellipse at center, #001d3d 0%, #000814 100%);
      color: #00eaff;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
    }
    .container {
      display: flex;
      justify-content: space-between;
      flex-wrap: wrap;
      width: 90%;
      max-width: 1200px;
      margin-top: 30px;
    }
    .duelist {
      width: 45%;
      min-width: 300px;
      background: #003566;
      border: 3px solid #00eaff;
      border-radius: 20px;
      padding: 20px;
      text-align: center;
      box-shadow: 0 0 20px #00eaff;
      margin-bottom: 20px;
    }
    .duelist h2 {
      margin: 10px 0;
      font-size: 24px;
    }
    .lp {
      font-size: 64px;
      margin: 20px 0;
      transition: color 0.3s ease;
    }
    .lp.animate {
      animation: bounce 0.3s ease;
    }
    @keyframes bounce {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.3); }
    }
    .controls input[type=number] {
      font-size: 20px;
      width: 100px;
      text-align: center;
      margin: 5px;
      padding: 6px 10px;
      border-radius: 8px;
      border: 2px solid #00eaff;
      background: #000814;
      color: #00eaff;
    }
    .controls button {
      font-size: 18px;
      padding: 8px 16px;
      margin: 5px;
      border: none;
      border-radius: 10px;
      background: #00eaff;
      color: #001d3d;
      cursor: pointer;
    }
    .controls button:hover {
      background-color: #00b8d4;
    }
    .center-panel {
      text-align: center;
      margin: 20px;
    }
    .timer-display {
      font-size: 32px;
      margin: 10px 0;
    }
    .actions button {
      font-size: 18px;
      margin: 10px;
      padding: 10px 20px;
      border: none;
      border-radius: 10px;
      background: #00eaff;
      color: #001d3d;
      cursor: pointer;
    }
    .actions button:hover {
      background-color: #00b8d4;
    }
    .bottom-icons {
      display: flex;
      justify-content: space-around;
      width: 100%;
      max-width: 600px;
      margin-top: auto;
      margin-bottom: 20px;
    }
    .icon {
      display: flex;
      flex-direction: column;
      align-items: center;
      font-size: 14px;
      cursor: pointer;
      color: #00eaff;
    }
    .icon img {
      width: 40px;
      height: 40px;
      margin-bottom: 5px;
      filter: brightness(1);
      transition: filter 0.3s ease;
    }
    .icon:hover img {
      filter: brightness(1.5);
    }
    .tools-panel {
      display: none;
      flex-direction: column;
      align-items: center;
      background: #002855;
      border: 2px solid #00eaff;
      border-radius: 15px;
      padding: 20px;
      margin: 20px;
      width: 90%;
      max-width: 600px;
    }
    .counter-group {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 10px;
    }
    .counter {
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .counter button {
      width: 40px;
      height: 40px;
      font-size: 20px;
      margin: 5px;
      background: #00eaff;
      color: #001d3d;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    .counter button:hover {
      background-color: #00b8d4;
    }
    .rolls button {
      margin: 5px;
      font-size: 18px;
      padding: 10px 15px;
      background: #00eaff;
      color: #001d3d;
      border: none;
      border-radius: 10px;
      cursor: pointer;
    }
    .rolls button:hover {
      background-color: #00b8d4;
    }
    .rolls div {
      font-size: 24px;
      margin-top: 10px;
    }

      .log {
    margin-top: 15px;
    text-align: left;
    font-size: 14px;
    max-height: 120px;
    overflow-y: auto;
    background-color: rgba(0, 0, 0, 0.3);
    padding: 10px;
    border-radius: 10px;
  }
  .log-entry {
    margin-bottom: 5px;
  }

  .duelist button {
  margin-top: 10px;
  background: #00eaff;
  color: #001d3d;
  padding: 6px 12px;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
}
.duelist button:hover {
  background-color: #00b8d4;
}

  </style>
</head>
<body>
  <header>
    <h1 style="display: none;">Yu-Gi-Oh! LP Counter</h1> <!-- Κρυφός τίτλος για screen readers -->
  </header>

  <main class="container">
    <article class="duelist">
  <h2>Duelist 1</h2>
  <div class="lp" id="lp1">8000</div>
  <div class="controls">
    <input id="amount1" type="number" value="100" />
    <button onclick="changeLP(1, true)">+</button>
    <button onclick="changeLP(1, false)">−</button>
    <!--<button onclick="resetLP(1)">Reset</button>-->
  </div>
  <button onclick="toggleLog(1)">Hide Log</button>
  <div class="log" id="log1" style="display: none;"></div> <!-- ✅ Προστέθηκε -->
</article>

<article class="duelist">
  <h2>Duelist 2</h2>
  <div class="lp" id="lp2">8000</div>
  <div class="controls">
    <input id="amount2" type="number" value="100" />
    <button onclick="changeLP(2, true)">+</button>
    <button onclick="changeLP(2, false)">−</button>
    <!--<button onclick="resetLP(2)">Reset</button>-->
  </div>
  <button onclick="toggleLog(2)">Hide Log</button>
  <div class="log" id="log2" style="display: none;"></div> <!-- ✅ Προστέθηκε -->
</article>
  </main>

  <section class="center-panel">
    <div class="timer-display" id="timer">00:00</div>
    <div class="actions">
      <button onclick="startTimer()">Start</button>
      <button onclick="pauseTimer()">Pause</button>
      <button onclick="resetTimer()">Reset</button>
    </div>
  </section>

  <section class="tools-panel" id="toolsPanel">
    <div class="counter-group">
      <!-- Counters -->
      <div class="counter">
        <button onclick="updateCounter(0, -1)">−</button>
        <div id="counter0">0</div>
        <button onclick="updateCounter(0, 1)">+</button>
      </div>
      <div class="counter">
        <button onclick="updateCounter(1, -1)">−</button>
        <div id="counter1">0</div>
        <button onclick="updateCounter(1, 1)">+</button>
      </div>
      <div class="counter">
        <button onclick="updateCounter(2, -1)">−</button>
        <div id="counter2">0</div>
        <button onclick="updateCounter(2, 1)">+</button>
      </div>
      <div class="counter">
        <button onclick="updateCounter(3, -1)">−</button>
        <div id="counter3">0</div>
        <button onclick="updateCounter(3, 1)">+</button>
      </div>
    </div>
    <div class="rolls">
      <button onclick="rollDice()">🎲 Roll Dice</button>
      <button onclick="flipCoin()">🪙 Flip Coin</button>
      <div id="rollResult">Ready</div>
    </div>
  </section>

<footer class="bottom-icons">
    <div class="icon" onclick="toggleTools()">
      <img src="https://img.icons8.com/ios-filled/50/00eaff/dice.png" alt="Open tools"/>
      <span>Tools</span>
    </div>
    <div class="icon" onclick="confirmResetAll()">
      <img src="https://img.icons8.com/ios-filled/50/e82d2d/delete-sign.png" alt="Reset All"/>
      <span style="color: #e82d2d;">Reset Όλων</span>
    </div>
</footer>

  <!--<audio id="clickSound" src="https://www.soundjay.com/buttons/sounds/button-16.mp3"></audio>-->
  <script>
    let lp1 = 8000;
    let lp2 = 8000;
    let seconds = 0;
    let timerInterval;
    const counters = [0, 0, 0, 0];

    function playSound() {
      const sound = document.getElementById("clickSound");
      sound.currentTime = 0;
      sound.play();
    }

    function animateLP(id) {
      const el = document.getElementById(id);
      el.classList.add("animate");
      setTimeout(() => el.classList.remove("animate"), 300);
    }

    function updateLPColor(id, val) {
      if (val <= 2000) {
        document.getElementById(id).style.color = "#ff4d4d";
        return;
      }else if (val <= 4000) {
        document.getElementById(id).style.color = "#ffb84d";
        return;
      }else if (val > 4000) {
        document.getElementById(id).style.color = "#00eaff";
        return;
      }
     /* document.getElementById(id).style.color = val <= 2000 ? "#ff4d4d" : "#00eaff";
      document.getElementById(id).style.color = val <= 20 ? "#FF4DED" : "#00eaff";*/
    }

    function changeLP(player, isAdd) {
      const input = document.getElementById(`amount${player}`);
      const value = parseInt(input.value) || 0;
      const change = isAdd ? value : -value;
      if (player === 1) {
        lp1 = Math.max(0, lp1 + change);
        document.getElementById("lp1").textContent = lp1;
        updateLPColor("lp1", lp1);
        animateLP("lp1");
      } else {
        lp2 = Math.max(0, lp2 + change);
        document.getElementById("lp2").textContent = lp2;
        updateLPColor("lp2", lp2);
        animateLP("lp2");
      }
      playSound();
      saveState();
    }

    function resetLP(player) {
      if (player === 1) {
        lp1 = 8000;
        document.getElementById("lp1").textContent = lp1;
        updateLPColor("lp1", lp1);
        animateLP("lp1");
      } else {
        lp2 = 8000;
        document.getElementById("lp2").textContent = lp2;
        updateLPColor("lp2", lp2);
        animateLP("lp2");
      }
      playSound();
      saveState();
    }

    function startTimer() {
      if (timerInterval) return;
      timerInterval = setInterval(() => {
        seconds++;
        updateTimerDisplay();
        saveState();
      }, 1000);
    }

    function pauseTimer() {
      clearInterval(timerInterval);
      timerInterval = null;
    }

    function resetTimer() {
      pauseTimer();
      seconds = 0;
      updateTimerDisplay();
      saveState();
    }

    function updateTimerDisplay() {
      const mins = String(Math.floor(seconds / 60)).padStart(2, '0');
      const secs = String(seconds % 60).padStart(2, '0');
      document.getElementById("timer").textContent = `${mins}:${secs}`;
    }

    function updateCounter(i, delta) {
      counters[i] += delta;
      if (counters[i] < 0) counters[i] = 0;
      document.getElementById(`counter${i}`).textContent = counters[i];
      playSound();
      saveState();
    }

    function rollDice() {
      document.getElementById("rollResult").textContent = `Rolled: ${Math.floor(Math.random() * 6) + 1}`;
      playSound();
    }

    function flipCoin() {
      document.getElementById("rollResult").textContent = `Coin: ${Math.random() < 0.5 ? 'Heads' : 'Tails'}`;
      playSound();
    }

    function toggleTools() {
      const panel = document.getElementById("toolsPanel");
      panel.style.display = panel.style.display === "flex" ? "none" : "flex";
    }

    function hideTools() {
      document.getElementById("toolsPanel").style.display = "none";
    }

    function saveState() {
      localStorage.setItem("ygolpState", JSON.stringify({ lp1, lp2, seconds, counters }));
    }

    function loadState() {
      const state = JSON.parse(localStorage.getItem("ygolpState"));
      if (!state) return;
      lp1 = state.lp1 ?? 8000;
      lp2 = state.lp2 ?? 8000;
      seconds = state.seconds ?? 0;
      for (let i = 0; i < counters.length; i++) {
        counters[i] = state.counters?.[i] ?? 0;
        document.getElementById(`counter${i}`).textContent = counters[i];
      }
      document.getElementById("lp1").textContent = lp1;
      document.getElementById("lp2").textContent = lp2;
      updateLPColor("lp1", lp1);
      updateLPColor("lp2", lp2);
      updateTimerDisplay();
    }



function changeLP(player, isAdd) {
    const input = document.getElementById(`amount${player}`);
    const value = parseInt(input.value) || 0;
    const change = isAdd ? value : -value;

    let oldLP = player === 1 ? lp1 : lp2;

    if (player === 1) {
      lp1 = Math.max(0, lp1 + change);
      document.getElementById("lp1").textContent = lp1;
      updateLPColor("lp1", lp1);
      animateLP("lp1");
    } else {
      lp2 = Math.max(0, lp2 + change);
      document.getElementById("lp2").textContent = lp2;
      updateLPColor("lp2", lp2);
      animateLP("lp2");
    }

    const logValue = isAdd ? `+${value}` : `−${value}`;
    addLogEntry(player, logValue); // ✅ Καταγραφή αλλαγής

    playSound();
    saveState();
  }

  // Συνάρτηση καταγραφή LP log
  function addLogEntry(player, changeText) {
    const log = document.getElementById(`log${player}`);
    const time = new Date().toLocaleTimeString();
    const entry = document.createElement("div");
    entry.className = "log-entry";
    entry.textContent = `[${time}] LP ${changeText}`;
    log.prepend(entry);
  }

  function resetLP(player) {
    if (player === 1) {
      lp1 = 8000;
      document.getElementById("lp1").textContent = lp1;
      updateLPColor("lp1", lp1);
      animateLP("lp1");
    } else {
      lp2 = 8000;
      document.getElementById("lp2").textContent = lp2;
      updateLPColor("lp2", lp2);
      animateLP("lp2");
    }
    playSound();
    saveState();
  }

  function loadState() {
    const state = JSON.parse(localStorage.getItem("ygolpState"));
    if (!state) return;
    lp1 = state.lp1 ?? 8000;
    lp2 = state.lp2 ?? 8000;
    seconds = state.seconds ?? 0;
    for (let i = 0; i < counters.length; i++) {
      counters[i] = state.counters?.[i] ?? 0;
      document.getElementById(`counter${i}`).textContent = counters[i];
    }
    document.getElementById("lp1").textContent = lp1;
    document.getElementById("lp2").textContent = lp2;
    updateLPColor("lp1", lp1);
    updateLPColor("lp2", lp2);
    updateTimerDisplay();
  }

  function toggleLog(player) {
  const log = document.getElementById(`log${player}`);
  const button = log.previousElementSibling; // το κουμπί βρίσκεται ακριβώς πριν
  if (log.style.display === "none") {
    log.style.display = "block";
    button.textContent = "Hide Log";
  } else {
    log.style.display = "none";
    button.textContent = "Show Log";
  }
}

function resetAll() {
  lp1 = 8000;
  lp2 = 8000;
  document.getElementById("lp1").textContent = lp1;
  document.getElementById("lp2").textContent = lp2;
  updateLPColor("lp1", lp1);
  updateLPColor("lp2", lp2);
  animateLP("lp1");
  animateLP("lp2");

  resetTimer();

  // Reset all counters
  for (let i = 0; i < counters.length; i++) {
    counters[i] = 0;
    document.getElementById(`counter${i}`).textContent = counters[i];
  }

  // Clear the logs for both players
  document.getElementById("log1").innerHTML = "";
  document.getElementById("log2").innerHTML = "";

  // Save the new state
  saveState();
}

function confirmResetAll() {
  if (window.confirm("Είστε σίγουροι ότι θέλετε να κάνετε reset όλων των μετρητών; Η ενέργεια αυτή δεν αναιρείται.")) {
    resetAll();
  }
}

  window.onload = loadState;
  </script>
</body>
</html>

